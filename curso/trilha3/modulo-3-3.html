<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modulo 3.3 - Integracao com ERPs | Dashboard Mastery</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#FACC15',
            dark: { 900: '#111827', 800: '#1f2937', 700: '#374151', 600: '#4b5563' }
          }
        }
      }
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>body { font-family: 'Inter', sans-serif; } .dark body { background-color: #111827; }</style>
</head>
<body class="bg-dark-900 text-neutral-100 min-h-screen">

  <nav class="sticky top-0 z-50 bg-dark-900/95 backdrop-blur-sm border-b border-dark-600">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-14">
        <div class="flex items-center space-x-4">
          <a href="../../index.html" class="flex items-center space-x-2 text-yellow-400 hover:text-yellow-300">
            <span class="text-2xl">üìä</span>
            <span class="font-bold text-lg hidden sm:inline">Dashboard Mastery</span>
          </a>
          <span class="text-neutral-600">|</span>
          <a href="https://inema.club" target="_blank" class="text-sky-400 hover:text-sky-300 text-sm font-medium">INEMA.CLUB</a>
        </div>
        <div class="flex items-center space-x-1 sm:space-x-2">
          <a href="../trilha1/index.html" class="px-3 py-1.5 rounded-lg text-sm font-semibold text-neutral-400 hover:text-emerald-400 hover:bg-emerald-500/10 transition-colors"><span class="sm:hidden">T1</span><span class="hidden sm:inline">Fundamentos</span></a>
          <a href="../trilha2/index.html" class="px-3 py-1.5 rounded-lg text-sm font-semibold text-neutral-400 hover:text-blue-400 hover:bg-blue-500/10 transition-colors"><span class="sm:hidden">T2</span><span class="hidden sm:inline">Tecnicas</span></a>
          <a href="index.html" class="px-3 py-1.5 rounded-lg text-sm font-semibold text-purple-400 bg-purple-500/10"><span class="sm:hidden">T3</span><span class="hidden sm:inline">Avancado</span></a>
          <button id="theme-toggle" class="p-2 rounded-lg bg-dark-700 hover:bg-dark-600 transition-colors ml-2">
            <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5 text-neutral-300" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
            <svg id="theme-toggle-light-icon" class="hidden w-5 h-5 text-neutral-300" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <div class="bg-dark-800/50 border-b border-dark-700">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-3">
      <div class="flex items-center space-x-2 text-sm">
        <a href="../../index.html" class="text-neutral-400 hover:text-neutral-300">Inicio</a>
        <span class="text-neutral-600">/</span>
        <a href="index.html" class="text-neutral-400 hover:text-neutral-300">Trilha 3</a>
        <span class="text-neutral-600">/</span>
        <span class="text-purple-400">Modulo 3.3</span>
      </div>
    </div>
  </div>

  <header class="bg-gradient-to-br from-purple-900/30 via-dark-800 to-dark-800 py-12 border-b border-dark-600">
    <div class="max-w-4xl mx-auto px-4">
      <span class="inline-block px-3 py-1 bg-purple-500/20 text-purple-400 text-xs font-semibold rounded-full mb-4">MODULO 3.3</span>
      <h1 class="text-3xl sm:text-4xl font-bold mb-4">üè¢ Integracao com ERPs</h1>
      <p class="text-lg text-neutral-400 max-w-2xl mb-8">SAP, Oracle, Totvs, mapeamento de dados empresariais, sincronizacao e webhooks para dashboards corporativos.</p>
      <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
        <div class="bg-dark-800/50 rounded-lg p-3 border border-dark-600"><div class="text-2xl mb-1">üìö</div><div class="text-xl font-bold text-purple-400">6</div><div class="text-xs text-neutral-500">Topicos</div></div>
        <div class="bg-dark-800/50 rounded-lg p-3 border border-dark-600"><div class="text-2xl mb-1">‚è±Ô∏è</div><div class="text-xl font-bold text-purple-400">80min</div><div class="text-xs text-neutral-500">Duracao</div></div>
        <div class="bg-dark-800/50 rounded-lg p-3 border border-dark-600"><div class="text-2xl mb-1">üìä</div><div class="text-xl font-bold text-purple-400">Avancado</div><div class="text-xs text-neutral-500">Nivel</div></div>
        <div class="bg-dark-800/50 rounded-lg p-3 border border-dark-600"><div class="text-2xl mb-1">üéØ</div><div class="text-xl font-bold text-purple-400">Enterprise</div><div class="text-xs text-neutral-500">Tipo</div></div>
      </div>
    </div>
  </header>

  <main class="max-w-4xl mx-auto px-4 py-12">

    <section class="mb-16">
      <div class="flex items-center mb-6">
        <span class="w-12 h-12 rounded-full bg-purple-500/20 text-purple-400 font-bold text-xl flex items-center justify-center mr-4">1</span>
        <div><h2 class="text-2xl font-bold">üî∑ Arquitetura de ERPs</h2><p class="text-neutral-400 text-sm">Entendendo sistemas legados</p></div>
      </div>
      <div class="space-y-6">
        <div class="bg-dark-800 rounded-xl border border-dark-600 p-6">
          <p class="text-neutral-300 leading-relaxed mb-4"><strong class="text-purple-400">ERPs (Enterprise Resource Planning)</strong> sao sistemas que integram todos os processos de uma empresa: financeiro, vendas, estoque, RH, producao. SAP, Oracle, Totvs, Sankhya sao os mais comuns no Brasil.</p>
          <p class="text-neutral-300 leading-relaxed">Para dashboards corporativos, <strong class="text-white">ERPs sao a fonte de verdade</strong>. Dados de receita, custos, estoque - tudo vem do ERP. Integrar corretamente e crucial.</p>
        </div>
        <div class="bg-dark-800 rounded-xl border border-dark-600 p-6">
          <h3 class="text-lg font-semibold text-purple-400 mb-4">üìã Principais ERPs e suas APIs</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-dark-700/50 rounded-lg p-4 border-l-4 border-blue-500"><div class="font-semibold text-white mb-2">SAP S/4HANA</div><p class="text-neutral-400 text-sm">OData APIs, RFC/BAPI para legado. Complexo mas bem documentado.</p></div>
            <div class="bg-dark-700/50 rounded-lg p-4 border-l-4 border-red-500"><div class="font-semibold text-white mb-2">Oracle ERP Cloud</div><p class="text-neutral-400 text-sm">REST APIs modernas. Integracao mais direta com autenticacao OAuth.</p></div>
            <div class="bg-dark-700/50 rounded-lg p-4 border-l-4 border-emerald-500"><div class="font-semibold text-white mb-2">Totvs Protheus</div><p class="text-neutral-400 text-sm">WebServices SOAP/REST. Documentacao variavel, comunidade ativa.</p></div>
            <div class="bg-dark-700/50 rounded-lg p-4 border-l-4 border-yellow-500"><div class="font-semibold text-white mb-2">Sankhya</div><p class="text-neutral-400 text-sm">API REST bem estruturada. Popular em empresas medias brasileiras.</p></div>
          </div>
        </div>
        <div class="bg-dark-800 rounded-xl border border-dark-600 p-6">
          <h3 class="text-lg font-semibold text-purple-400 mb-4">üíª Codigo: Conexao com SAP OData</h3>
          <div class="bg-dark-900 rounded-lg p-4 font-mono text-sm overflow-x-auto">
            <pre class="text-green-400">// Conexao com SAP S/4HANA via OData
const sapClient = {
  baseUrl: 'https://sap-server.company.com/sap/opu/odata/sap',

  async getOrders(filters: { dateFrom: string }) {
    const response = await fetch(
      `${this.baseUrl}/API_SALES_ORDER_SRV/A_SalesOrder?$filter=CreationDate ge datetime'${filters.dateFrom}'`,
      {
        headers: {
          'Authorization': `Basic ${Buffer.from(`${user}:${pass}`).toString('base64')}`,
          'Accept': 'application/json'
        }
      }
    );
    const data = await response.json();
    return data.d.results.map(transformSAPOrder);
  }
};

function transformSAPOrder(sapOrder: SAPOrder) {
  return {
    id: sapOrder.SalesOrder,
    customerName: sapOrder.SoldToParty,
    total: parseFloat(sapOrder.TotalNetAmount),
    currency: sapOrder.TransactionCurrency,
    createdAt: new Date(parseInt(sapOrder.CreationDate.match(/\d+/)[0]))
  };
}</pre>
          </div>
        </div>
      </div>
    </section>

    <section class="mb-16">
      <div class="flex items-center mb-6">
        <span class="w-12 h-12 rounded-full bg-purple-500/20 text-purple-400 font-bold text-xl flex items-center justify-center mr-4">2</span>
        <div><h2 class="text-2xl font-bold">üó∫Ô∏è Mapeamento de Dados</h2><p class="text-neutral-400 text-sm">ETL e transformacao</p></div>
      </div>
      <div class="space-y-6">
        <div class="bg-dark-800 rounded-xl border border-dark-600 p-6">
          <p class="text-neutral-300 leading-relaxed mb-4"><strong class="text-purple-400">ETL (Extract, Transform, Load)</strong> e o processo de extrair dados do ERP, transforma-los para o formato do dashboard e carregar no destino. Raramente dados do ERP estao prontos para visualizacao direta.</p>
          <p class="text-neutral-300 leading-relaxed">Transformacoes comuns incluem: <strong class="text-white">agregacao de valores, conversao de moedas, calculo de metricas derivadas, limpeza de dados nulos</strong>.</p>
        </div>
        <div class="bg-dark-800 rounded-xl border border-dark-600 p-6">
          <h3 class="text-lg font-semibold text-purple-400 mb-4">üíª Codigo: Pipeline ETL</h3>
          <div class="bg-dark-900 rounded-lg p-4 font-mono text-sm overflow-x-auto">
            <pre class="text-green-400">// Pipeline ETL para dados de vendas
async function etlSalesData() {
  // EXTRACT - Buscar do ERP
  const rawOrders = await sapClient.getOrders({ dateFrom: '2024-01-01' });

  // TRANSFORM - Processar e agregar
  const transformed = rawOrders
    .filter(order => order.status !== 'CANCELLED')
    .map(order => ({
      ...order,
      totalBRL: convertCurrency(order.total, order.currency, 'BRL'),
      month: format(order.createdAt, 'yyyy-MM'),
      category: mapProductCategory(order.productCode)
    }));

  const aggregated = groupBy(transformed, 'month');
  const metrics = Object.entries(aggregated).map(([month, orders]) => ({
    month,
    revenue: sumBy(orders, 'totalBRL'),
    count: orders.length,
    avgTicket: sumBy(orders, 'totalBRL') / orders.length
  }));

  // LOAD - Salvar no banco do dashboard
  await prisma.salesMetric.createMany({ data: metrics });
}</pre>
          </div>
        </div>
      </div>
    </section>

    <section class="mb-16">
      <div class="flex items-center mb-6">
        <span class="w-12 h-12 rounded-full bg-purple-500/20 text-purple-400 font-bold text-xl flex items-center justify-center mr-4">3</span>
        <div><h2 class="text-2xl font-bold">üîÑ Sincronizacao de Dados</h2><p class="text-neutral-400 text-sm">Batch vs real-time</p></div>
      </div>
      <div class="space-y-6">
        <div class="bg-dark-800 rounded-xl border border-dark-600 p-6">
          <p class="text-neutral-300 leading-relaxed mb-4"><strong class="text-purple-400">Sincronizacao</strong> define quando e como dados sao atualizados do ERP para o dashboard. A escolha impacta freshness dos dados vs carga no sistema.</p>
        </div>
        <div class="bg-dark-800 rounded-xl border border-dark-600 p-6">
          <h3 class="text-lg font-semibold text-purple-400 mb-4">‚öñÔ∏è Estrategias de Sync</h3>
          <div class="space-y-4">
            <div class="bg-dark-700/50 rounded-lg p-4 border-l-4 border-blue-500"><div class="font-semibold text-white mb-2">Full Sync (Batch)</div><p class="text-neutral-400 text-sm">Extrai todos os dados periodicamente. Simples mas pesado. Ideal para dados historicos.</p><div class="text-xs font-mono mt-2 text-blue-300">Cron: 0 3 * * * (3AM diario)</div></div>
            <div class="bg-dark-700/50 rounded-lg p-4 border-l-4 border-emerald-500"><div class="font-semibold text-white mb-2">Delta Sync</div><p class="text-neutral-400 text-sm">Apenas registros alterados desde ultima sync. Mais eficiente, requer campo de timestamp.</p><div class="text-xs font-mono mt-2 text-emerald-300">WHERE updated_at > last_sync</div></div>
            <div class="bg-dark-700/50 rounded-lg p-4 border-l-4 border-purple-500"><div class="font-semibold text-white mb-2">CDC (Change Data Capture)</div><p class="text-neutral-400 text-sm">Captura mudancas em tempo real via log do banco. Mais complexo, dados mais frescos.</p><div class="text-xs font-mono mt-2 text-purple-300">Debezium, Oracle GoldenGate</div></div>
          </div>
        </div>
      </div>
    </section>

    <section class="mb-16">
      <div class="flex items-center mb-6">
        <span class="w-12 h-12 rounded-full bg-purple-500/20 text-purple-400 font-bold text-xl flex items-center justify-center mr-4">4</span>
        <div><h2 class="text-2xl font-bold">ü™ù Webhooks e Eventos</h2><p class="text-neutral-400 text-sm">Notificacoes push</p></div>
      </div>
      <div class="space-y-6">
        <div class="bg-dark-800 rounded-xl border border-dark-600 p-6">
          <p class="text-neutral-300 leading-relaxed mb-4"><strong class="text-purple-400">Webhooks</strong> invertem o fluxo: ao inves do dashboard buscar dados (polling), o ERP notifica quando algo muda. Mais eficiente e com menor latencia.</p>
        </div>
        <div class="bg-dark-800 rounded-xl border border-dark-600 p-6">
          <h3 class="text-lg font-semibold text-purple-400 mb-4">üíª Codigo: Endpoint de Webhook</h3>
          <div class="bg-dark-900 rounded-lg p-4 font-mono text-sm overflow-x-auto">
            <pre class="text-green-400">// Next.js API Route para receber webhooks do ERP
export async function POST(request: Request) {
  const signature = request.headers.get('X-Webhook-Signature');
  const body = await request.text();

  // Validar assinatura
  if (!verifyWebhookSignature(body, signature, WEBHOOK_SECRET)) {
    return new Response('Invalid signature', { status: 401 });
  }

  const event = JSON.parse(body);

  // Processar por tipo de evento
  switch (event.type) {
    case 'order.created':
      await updateDashboardMetrics(event.data);
      await notifyRealtimeClients('new-order', event.data);
      break;
    case 'order.updated':
      await refreshOrderCache(event.data.orderId);
      break;
  }

  // Responder rapido - processamento pesado em background
  return new Response('OK', { status: 200 });
}</pre>
          </div>
        </div>
      </div>
    </section>

    <section class="mb-16">
      <div class="flex items-center mb-6">
        <span class="w-12 h-12 rounded-full bg-purple-500/20 text-purple-400 font-bold text-xl flex items-center justify-center mr-4">5</span>
        <div><h2 class="text-2xl font-bold">üîê Autenticacao com ERPs</h2><p class="text-neutral-400 text-sm">Credenciais e tokens</p></div>
      </div>
      <div class="space-y-6">
        <div class="bg-dark-800 rounded-xl border border-dark-600 p-6">
          <p class="text-neutral-300 leading-relaxed mb-4">Cada ERP tem seu metodo de autenticacao preferido. <strong class="text-purple-400">SAP usa Basic Auth ou OAuth</strong>, <strong class="text-purple-400">Oracle usa OAuth 2.0</strong>, <strong class="text-purple-400">Totvs varia por versao</strong>.</p>
        </div>
        <div class="bg-dark-800 rounded-xl border border-dark-600 p-6">
          <h3 class="text-lg font-semibold text-purple-400 mb-4">üîë Metodos de Autenticacao</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-dark-700/50 rounded-lg p-4"><div class="text-purple-400 font-semibold mb-2">Basic Auth</div><p class="text-neutral-400 text-sm">Usuario:senha em Base64. Simples mas menos seguro. Ideal para integracao server-to-server.</p></div>
            <div class="bg-dark-700/50 rounded-lg p-4"><div class="text-purple-400 font-semibold mb-2">OAuth 2.0</div><p class="text-neutral-400 text-sm">Tokens com expiracao. Mais seguro, requer refresh token logic.</p></div>
            <div class="bg-dark-700/50 rounded-lg p-4"><div class="text-purple-400 font-semibold mb-2">API Key</div><p class="text-neutral-400 text-sm">Chave fixa no header. Comum em ERPs mais simples.</p></div>
            <div class="bg-dark-700/50 rounded-lg p-4"><div class="text-purple-400 font-semibold mb-2">Certificado X.509</div><p class="text-neutral-400 text-sm">Autenticacao mutua TLS. Mais seguro, complexo de configurar.</p></div>
          </div>
        </div>
      </div>
    </section>

    <section class="mb-16">
      <div class="flex items-center mb-6">
        <span class="w-12 h-12 rounded-full bg-purple-500/20 text-purple-400 font-bold text-xl flex items-center justify-center mr-4">6</span>
        <div><h2 class="text-2xl font-bold">üáßüá∑ ERPs Brasileiros</h2><p class="text-neutral-400 text-sm">Totvs, Sankhya, Senior</p></div>
      </div>
      <div class="space-y-6">
        <div class="bg-dark-800 rounded-xl border border-dark-600 p-6">
          <p class="text-neutral-300 leading-relaxed mb-4">O mercado brasileiro tem ERPs locais muito populares. <strong class="text-purple-400">Totvs domina o mercado mid-market</strong>, <strong class="text-purple-400">Sankhya cresce em industrias</strong>, <strong class="text-purple-400">Senior foca em RH e folha</strong>.</p>
        </div>
        <div class="bg-dark-800 rounded-xl border border-dark-600 p-6">
          <h3 class="text-lg font-semibold text-purple-400 mb-4">üíª Codigo: Integracao Totvs Protheus</h3>
          <div class="bg-dark-900 rounded-lg p-4 font-mono text-sm overflow-x-auto">
            <pre class="text-green-400">// Conexao com Totvs Protheus REST
class TotvsPro theusClient {
  private token: string;

  async authenticate() {
    const response = await fetch(`${this.baseUrl}/api/oauth2/token`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
      body: new URLSearchParams({
        grant_type: 'password',
        username: process.env.TOTVS_USER!,
        password: process.env.TOTVS_PASS!
      })
    });
    this.token = (await response.json()).access_token;
  }

  async getSalesOrders(params: { branch: string; startDate: string }) {
    const response = await fetch(
      `${this.baseUrl}/rest/MATA410/${params.branch}?startDate=${params.startDate}`,
      { headers: { 'Authorization': `Bearer ${this.token}` } }
    );
    return response.json();
  }
}</pre>
          </div>
        </div>
        <div class="bg-gradient-to-r from-purple-900/30 to-dark-800 rounded-xl border border-purple-500/30 p-6">
          <h3 class="text-lg font-semibold text-purple-400 mb-3 flex items-center"><span class="mr-2">üí°</span> Dica Pratica</h3>
          <p class="text-neutral-300"><strong>Para ERPs brasileiros:</strong> A documentacao pode ser escassa. Participe de comunidades como Totvs Developer Community, grupos de WhatsApp/Telegram de desenvolvedores. Muito conhecimento esta disperso em forums e nao na doc oficial.</p>
        </div>
      </div>
    </section>

    <section class="mb-12">
      <div class="bg-gradient-to-br from-purple-900/40 via-dark-800 to-dark-800 rounded-xl border border-purple-500/30 p-8">
        <h2 class="text-2xl font-bold mb-6 flex items-center"><span class="mr-3">üìù</span> Resumo do Modulo</h2>
        <div class="space-y-4 mb-8">
          <div class="flex items-start space-x-3"><span class="text-purple-400 mt-1">‚úì</span><div><strong class="text-white">Arquitetura ERP</strong><span class="text-neutral-400"> - SAP, Oracle, Totvs e suas APIs</span></div></div>
          <div class="flex items-start space-x-3"><span class="text-purple-400 mt-1">‚úì</span><div><strong class="text-white">ETL</strong><span class="text-neutral-400"> - Extract, Transform, Load para dados do ERP</span></div></div>
          <div class="flex items-start space-x-3"><span class="text-purple-400 mt-1">‚úì</span><div><strong class="text-white">Sincronizacao</strong><span class="text-neutral-400"> - Full sync, delta sync, CDC</span></div></div>
          <div class="flex items-start space-x-3"><span class="text-purple-400 mt-1">‚úì</span><div><strong class="text-white">Webhooks</strong><span class="text-neutral-400"> - Notificacoes push do ERP para dashboard</span></div></div>
          <div class="flex items-start space-x-3"><span class="text-purple-400 mt-1">‚úì</span><div><strong class="text-white">Autenticacao</strong><span class="text-neutral-400"> - Basic Auth, OAuth, certificados</span></div></div>
          <div class="flex items-start space-x-3"><span class="text-purple-400 mt-1">‚úì</span><div><strong class="text-white">ERPs Brasileiros</strong><span class="text-neutral-400"> - Especificidades de Totvs, Sankhya, Senior</span></div></div>
        </div>
        <div class="flex flex-col sm:flex-row gap-4">
          <a href="modulo-3-2.html" class="flex-1 px-6 py-3 bg-dark-700 hover:bg-dark-600 text-neutral-300 rounded-lg text-center transition-colors">‚Üê Anterior: APIs e Data Layer</a>
          <a href="modulo-3-4.html" class="flex-1 px-6 py-3 bg-purple-600 hover:bg-purple-500 text-white rounded-lg text-center transition-colors font-semibold">Proximo: Integracao com CRMs ‚Üí</a>
        </div>
      </div>
    </section>

  </main>

  <footer class="border-t border-dark-600 py-8 mt-12">
    <div class="max-w-4xl mx-auto px-4 text-center text-neutral-500 text-sm">
      <p>Dashboard Mastery - Modulo 3.3: Integracao com ERPs</p>
      <p class="mt-2"><a href="https://inema.club" target="_blank" class="text-sky-400 hover:text-sky-300">INEMA.CLUB</a></p>
    </div>
  </footer>

  <script>
    const themeToggle = document.getElementById('theme-toggle');
    const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
    const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');
    const html = document.documentElement;
    if (localStorage.getItem('theme') === 'light' || (!localStorage.getItem('theme') && !html.classList.contains('dark'))) { themeToggleDarkIcon.classList.remove('hidden'); html.classList.remove('dark'); } else { themeToggleLightIcon.classList.remove('hidden'); }
    themeToggle.addEventListener('click', () => { themeToggleDarkIcon.classList.toggle('hidden'); themeToggleLightIcon.classList.toggle('hidden'); html.classList.toggle('dark'); localStorage.setItem('theme', html.classList.contains('dark') ? 'dark' : 'light'); });
  </script>

</body>
</html>
